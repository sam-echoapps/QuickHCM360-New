/**
 * @license
 * Ideal Postcodes <https://ideal-postcodes.co.uk>
 * Copyright IDDQD Limited
 * Postcode Lookup Bundled 2.2.7
 * Built on Postcode Lookup ~1.10.0
 * AGPL-3.0 Licence
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).IdealPostcodes=t.IdealPostcodes||{})}(this,(function(t){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e,n){return(d=f()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return d(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function y(t){var e=f();return function(){var n,r=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],u=!0,s=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{u||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b=setTimeout;function w(t){return Boolean(t&&void 0!==t.length)}function S(){}function C(t){if(!(this instanceof C))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],_(t,this)}function E(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,C._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void A(e.promise,t)}k(e.promise,r)}else(1===t._state?k:A)(e.promise,t._value)}))):t._deferreds.push(e)}function k(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof C)return t._state=3,t._value=e,void O(t);if("function"==typeof n)return void _((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,O(t)}catch(e){A(t,e)}var r,o}function A(t,e){t._state=2,t._value=e,O(t)}function O(t){2===t._state&&0===t._deferreds.length&&C._immediateFn((function(){t._handled||C._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)E(t,t._deferreds[e]);t._deferreds=null}function j(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function _(t,e){var n=!1;try{t((function(t){n||(n=!0,k(e,t))}),(function(t){n||(n=!0,A(e,t))}))}catch(t){if(n)return;n=!0,A(e,t)}}C.prototype.catch=function(t){return this.then(null,t)},C.prototype.then=function(t,e){var n=new this.constructor(S);return E(this,new j(t,e,n)),n},C.prototype.finally=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))},C.all=function(t){return new C((function(e,n){if(!w(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function i(t,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var s=u.then;if("function"==typeof s)return void s.call(u,(function(e){i(t,e)}),n)}r[t]=u,0==--o&&e(r)}catch(t){n(t)}}for(var u=0;u<r.length;u++)i(u,r[u])}))},C.allSettled=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function i(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var u=n.then;if("function"==typeof u)return void u.call(n,(function(e){i(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--o&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--o&&e(r)}for(var u=0;u<r.length;u++)i(u,r[u])}))},C.resolve=function(t){return t&&"object"==typeof t&&t.constructor===C?t:new C((function(e){e(t)}))},C.reject=function(t){return new C((function(e,n){n(t)}))},C.race=function(t){return new C((function(e,n){if(!w(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=t.length;r<o;r++)C.resolve(t[r]).then(e,n)}))},C._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){b(t,0)},C._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var x={tls:!0,api_key:"",baseUrl:"api.ideal-postcodes.co.uk",version:"v1",strictAuthorisation:!1,timeout:1e4,header:{Accept:"application/json","Content-Type":"application/json"},tags:[],agent:{}},T=function(){function t(e){o(this,t),this.config=n(n({},x),e),this.config.header=n(n({},x.header),e.header&&e.header)}return u(t,[{key:"url",value:function(){var t=this.config,e=t.baseUrl,n=t.version;return"".concat(this.protocol(),"://").concat(e,"/").concat(n)}},{key:"protocol",value:function(){return this.config.tls?"https":"http"}}]),t}(),P=function(t){return void 0===t?{}:Object.keys(t).reduce((function(e,n){var r=t[n],o=q(r);return o.length>0&&(e[n]=o),e}),{})},L=function(t){return"string"==typeof t},q=function(t){var e,n=[];return e=t,Array.isArray(e)?(t.forEach((function(t){R(t)&&n.push(t.toString()),L(t)&&n.push(t)})),n.join(",")):R(t)?t.toString():L(t)?t:""},R=function(t){return"number"==typeof t},B=function(t,e){var n=t.timeout;return R(n)?n:e.config.timeout},F=function(t,e){var r=t.header,o=void 0===r?{}:r;return n(n({},e.config.header),P(o))},N=function(t){var e=t.header,n=t.options,r=t.client;return e.Authorization=function(t,e){var n=[],r=e.api_key||t.config.api_key;n.push(["api_key",r]);var o=e.licensee;void 0!==o&&n.push(["licensee",o]);var i=e.user_token;return void 0!==i&&n.push(["user_token",i]),"IDEALPOSTCODES ".concat(I(n))}(r,n),e},I=function(t){return t.map((function(t){var e=m(t,2),n=e[0],r=e[1];return"".concat(n,'="').concat(r,'"')})).join(" ")},U=function(t){var e=t.header,n=t.options.sourceIp;return void 0!==n&&(e["IDPC-Source-IP"]=n),e},D=function(t){var e=t.query,n=t.options.filter;return void 0!==n&&(e.filter=n.join(",")),e},M=function(t){var e,n=t.client,r=t.query,o=t.options;return n.config.tags.length&&(e=n.config.tags),o.tags&&(e=o.tags),void 0!==e&&(r.tags=e.join(",")),r},H=function(t){a(n,t);var e=y(n);function n(t){var r;o(this,n);var i=(this instanceof n?this.constructor:void 0).prototype;(r=e.call(this)).__proto__=i;var u=t.message,s=t.httpStatus,a=t.metadata,c=void 0===a?{}:a;return r.message=u,r.name="Ideal Postcodes Error",r.httpStatus=s,r.metadata=c,Error.captureStackTrace&&Error.captureStackTrace(h(r),n),r}return n}(p(Error)),G=function(t){a(n,t);var e=y(n);function n(t){var r;return o(this,n),(r=e.call(this,{httpStatus:t.httpStatus,message:t.body.message})).response=t,r}return n}(H),z=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(G),J=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(G),K=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(J),$=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(G),W=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}($),X=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}($),V=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(G),Y=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(V),Q=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(V),Z=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(V),tt=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(V),et=function(t){a(n,t);var e=y(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(G),nt=function(t){return null!==(e=t)&&"object"===r(e)&&("string"==typeof t.message&&"number"==typeof t.code);var e},rt=function(t){var e=t.httpStatus,n=t.body;if(!function(t){return!(t<200||t>=300)}(e)){if(nt(n)){var r=n.code;if(4010===r)return new K(t);if(4040===r)return new Y(t);if(4042===r)return new Q(t);if(4044===r)return new Z(t);if(4046===r)return new tt(t);if(4020===r)return new W(t);if(4021===r)return new X(t);if(404===e)return new V(t);if(400===e)return new z(t);if(402===e)return new $(t);if(401===e)return new J(t);if(500===e)return new et(t)}return new H({httpStatus:e,message:JSON.stringify(n)})}},ot=function(t,e){return[t.client.url(),t.resource,encodeURIComponent(e),t.action].filter((function(t){return void 0!==t})).join("/")},it=function(t){var e=t.client;return function(n,r){return e.config.agent.http({method:"GET",url:ot(t,n),query:P(r.query),header:F(r,e),timeout:B(r,e)}).then((function(t){var e=rt(t);if(e)throw e;return t}))}},ut=function(t,e){return function(t){var e=t.client,n=t.resource;return function(t){return e.config.agent.http({method:"GET",url:"".concat(e.url(),"/").concat(n),query:P(t.query),header:F(t,e),timeout:B(t,e)}).then((function(t){var e=rt(t);if(e)throw e;return t}))}}({resource:"addresses",client:t})(e)},st=function(t){var e,n,r,o=at(t),i=t.page;return void 0!==i&&(o.query.page=i.toString()),(e=t.client,n=t.postcode,r=o,it({resource:"postcodes",client:e})(n,r)).then((function(t){return t.body.result})).catch((function(t){if(t instanceof Y)return[];throw t}))},at=function(t){var e={},n={},r=t.client;N({client:r,header:e,options:t}),U({header:e,options:t}),D({query:n,options:t}),M({client:r,query:n,options:t});var o={header:e,query:n};return void 0!==t.timeout&&(o.timeout=t.timeout),o},ct=function(t){var e=t.client,n=t.timeout,r=t.api_key||t.client.config.api_key,o=t.licensee,i={query:void 0===o?{}:{licensee:o},header:{}};return void 0!==n&&(i.timeout=n),function(t,e,n){return it({resource:"keys",client:t})(e,n)}(e,r,i).then((function(t){return t.body.result}))},lt={exports:{}},ft=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},dt=ft,pt=Object.prototype.toString;function ht(t){return"[object Array]"===pt.call(t)}function vt(t){return void 0===t}function yt(t){return null!==t&&"object"==typeof t}function mt(t){if("[object Object]"!==pt.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function gt(t){return"[object Function]"===pt.call(t)}function bt(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),ht(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var wt={isArray:ht,isArrayBuffer:function(t){return"[object ArrayBuffer]"===pt.call(t)},isBuffer:function(t){return null!==t&&!vt(t)&&null!==t.constructor&&!vt(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:yt,isPlainObject:mt,isUndefined:vt,isDate:function(t){return"[object Date]"===pt.call(t)},isFile:function(t){return"[object File]"===pt.call(t)},isBlob:function(t){return"[object Blob]"===pt.call(t)},isFunction:gt,isStream:function(t){return yt(t)&&gt(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:bt,merge:function t(){var e={};function n(n,r){mt(e[r])&&mt(n)?e[r]=t(e[r],n):mt(n)?e[r]=t({},n):ht(n)?e[r]=n.slice():e[r]=n}for(var r=0,o=arguments.length;r<o;r++)bt(arguments[r],n);return e},extend:function(t,e,n){return bt(e,(function(e,r){t[r]=n&&"function"==typeof e?dt(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}},St=wt;function Ct(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Et=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(St.isURLSearchParams(e))r=e.toString();else{var o=[];St.forEach(e,(function(t,e){null!=t&&(St.isArray(t)?e+="[]":t=[t],St.forEach(t,(function(t){St.isDate(t)?t=t.toISOString():St.isObject(t)&&(t=JSON.stringify(t)),o.push(Ct(e)+"="+Ct(t))})))})),r=o.join("&")}if(r){var i=t.indexOf("#");-1!==i&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t},kt=wt;function At(){this.handlers=[]}At.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},At.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},At.prototype.forEach=function(t){kt.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var Ot=At,jt=wt,_t=function(t){return!(!t||!t.__CANCEL__)},xt=wt,Tt=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},Pt=function(t,e,n,r,o){var i=new Error(t);return Tt(i,e,n,r,o)},Lt=Pt,qt=wt,Rt=qt.isStandardBrowserEnv()?{write:function(t,e,n,r,o,i){var u=[];u.push(t+"="+encodeURIComponent(e)),qt.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),qt.isString(r)&&u.push("path="+r),qt.isString(o)&&u.push("domain="+o),!0===i&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Bt=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},Ft=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t},Nt=wt,It=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ut=wt,Dt=Ut.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=Ut.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0},Mt=wt,Ht=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(Lt("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)},Gt=Rt,zt=Et,Jt=function(t,e){return t&&!Bt(e)?Ft(t,e):e},Kt=function(t){var e,n,r,o={};return t?(Nt.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=Nt.trim(t.substr(0,r)).toLowerCase(),n=Nt.trim(t.substr(r+1)),e){if(o[e]&&It.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}})),o):o},$t=Dt,Wt=Pt,Xt=function(t){return new C((function(e,n){var r=t.data,o=t.headers;Mt.isFormData(r)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",s=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(u+":"+s)}var a=Jt(t.baseURL,t.url);if(i.open(t.method.toUpperCase(),zt(a,t.params,t.paramsSerializer),!0),i.timeout=t.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in i?Kt(i.getAllResponseHeaders()):null,o={data:t.responseType&&"text"!==t.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:r,config:t,request:i};Ht(e,n,o),i=null}},i.onabort=function(){i&&(n(Wt("Request aborted",t,"ECONNABORTED",i)),i=null)},i.onerror=function(){n(Wt("Network Error",t,null,i)),i=null},i.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(Wt(e,t,"ECONNABORTED",i)),i=null},Mt.isStandardBrowserEnv()){var c=(t.withCredentials||$t(a))&&t.xsrfCookieName?Gt.read(t.xsrfCookieName):void 0;c&&(o[t.xsrfHeaderName]=c)}if("setRequestHeader"in i&&Mt.forEach(o,(function(t,e){void 0===r&&"content-type"===e.toLowerCase()?delete o[e]:i.setRequestHeader(e,t)})),Mt.isUndefined(t.withCredentials)||(i.withCredentials=!!t.withCredentials),t.responseType)try{i.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&i.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){i&&(i.abort(),n(t),i=null)})),r||(r=null),i.send(r)}))},Vt=wt,Yt=function(t,e){xt.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))},Qt={"Content-Type":"application/x-www-form-urlencoded"};function Zt(t,e){!Vt.isUndefined(t)&&Vt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var te,ee={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(te=Xt),te),transformRequest:[function(t,e){return Yt(e,"Accept"),Yt(e,"Content-Type"),Vt.isFormData(t)||Vt.isArrayBuffer(t)||Vt.isBuffer(t)||Vt.isStream(t)||Vt.isFile(t)||Vt.isBlob(t)?t:Vt.isArrayBufferView(t)?t.buffer:Vt.isURLSearchParams(t)?(Zt(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Vt.isObject(t)?(Zt(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};ee.headers={common:{Accept:"application/json, text/plain, */*"}},Vt.forEach(["delete","get","head"],(function(t){ee.headers[t]={}})),Vt.forEach(["post","put","patch"],(function(t){ee.headers[t]=Vt.merge(Qt)}));var ne=ee,re=wt,oe=function(t,e,n){return jt.forEach(n,(function(n){t=n(t,e)})),t},ie=_t,ue=ne;function se(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var ae=wt,ce=function(t,e){e=e||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function s(t,e){return ae.isPlainObject(t)&&ae.isPlainObject(e)?ae.merge(t,e):ae.isPlainObject(e)?ae.merge({},e):ae.isArray(e)?e.slice():e}function a(r){ae.isUndefined(e[r])?ae.isUndefined(t[r])||(n[r]=s(void 0,t[r])):n[r]=s(t[r],e[r])}ae.forEach(r,(function(t){ae.isUndefined(e[t])||(n[t]=s(void 0,e[t]))})),ae.forEach(o,a),ae.forEach(i,(function(r){ae.isUndefined(e[r])?ae.isUndefined(t[r])||(n[r]=s(void 0,t[r])):n[r]=s(void 0,e[r])})),ae.forEach(u,(function(r){r in e?n[r]=s(t[r],e[r]):r in t&&(n[r]=s(void 0,t[r]))}));var c=r.concat(o).concat(i).concat(u),l=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===c.indexOf(t)}));return ae.forEach(l,a),n},le=wt,fe=Et,de=Ot,pe=function(t){return se(t),t.headers=t.headers||{},t.data=oe(t.data,t.headers,t.transformRequest),t.headers=re.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),re.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||ue.adapter)(t).then((function(e){return se(t),e.data=oe(e.data,e.headers,t.transformResponse),e}),(function(e){return ie(e)||(se(t),e&&e.response&&(e.response.data=oe(e.response.data,e.response.headers,t.transformResponse))),C.reject(e)}))},he=ce;function ve(t){this.defaults=t,this.interceptors={request:new de,response:new de}}ve.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=he(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[pe,void 0],n=C.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},ve.prototype.getUri=function(t){return t=he(this.defaults,t),fe(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},le.forEach(["delete","get","head","options"],(function(t){ve.prototype[t]=function(e,n){return this.request(he(n||{},{method:t,url:e,data:(n||{}).data}))}})),le.forEach(["post","put","patch"],(function(t){ve.prototype[t]=function(e,n,r){return this.request(he(r||{},{method:t,url:e,data:n}))}}));var ye=ve;function me(t){this.message=t}me.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},me.prototype.__CANCEL__=!0;var ge=me,be=ge;function we(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new C((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new be(t),e(n.reason))}))}we.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},we.source=function(){var t;return{token:new we((function(e){t=e})),cancel:t}};var Se=we,Ce=wt,Ee=ft,ke=ye,Ae=ce;function Oe(t){var e=new ke(t),n=Ee(ke.prototype.request,e);return Ce.extend(n,ke.prototype,e),Ce.extend(n,e),n}var je=Oe(ne);je.Axios=ke,je.create=function(t){return Oe(Ae(je.defaults,t))},je.Cancel=ge,je.CancelToken=Se,je.isCancel=_t,je.all=function(t){return C.all(t)},je.spread=function(t){return function(e){return t.apply(null,e)}},je.isAxiosError=function(t){return"object"==typeof t&&!0===t.isAxiosError},lt.exports=je,lt.exports.default=je;var _e=lt.exports,xe=H,Te=function(t,e){return{httpRequest:t,body:e.data,httpStatus:e.status||0,header:(n=e.headers,Object.keys(n).reduce((function(t,e){var r=n[e];return"string"==typeof r?t[e]=r:Array.isArray(r)&&(t[e]=r.join(",")),t}),{})),metadata:{response:e}};var n},Pe=function(t){var e=new xe({message:"[".concat(t.name,"] ").concat(t.message),httpStatus:0,metadata:{axios:t}});return C.reject(e)},Le=function(){return!0},qe=function(){function t(){o(this,t),this.Axios=_e.create({validateStatus:Le})}return u(t,[{key:"requestWithBody",value:function(t){var e=t.body,n=t.method,r=t.timeout,o=t.url,i=t.header,u=t.query;return this.Axios.request({url:o,method:n,headers:i,params:u,data:e,timeout:r}).then((function(e){return Te(t,e)})).catch(Pe)}},{key:"request",value:function(t){var e=t.method,n=t.timeout,r=t.url,o=t.header,i=t.query;return this.Axios.request({url:r,method:e,headers:o,params:i,timeout:n}).then((function(e){return Te(t,e)})).catch(Pe)}},{key:"http",value:function(t){return void 0!==t.body?this.requestWithBody(t):this.request(t)}}]),t}(),Re=function(t){a(r,t);var e=y(r);function r(t){o(this,r);var i=new qe;return e.call(this,n({agent:i},t))}return r}(T),Be=function(t){return"string"==typeof t},Fe=function(t){return t.setAttribute("idpc","true")},Ne=function(t,e){return Be(t)?e.querySelector(t):t},Ie=function(){return window.document},Ue=function(t){return Be(t)?Ie().querySelector(t):null===t?Ie():t},De=function(t,e){var n=t.getAttribute("style");return Object.keys(e).forEach((function(n){return t.style[n]=e[n]})),n},Me=function(t){return t.style.display="none",t},He=function(t){return t.style.display="",t},Ge=function(t){null!==t&&null!==t.parentNode&&t.parentNode.removeChild(t)},ze=function(t,e,n){for(var r=t.querySelectorAll(e),o=0;o<r.length;o++){var i=r[o],u=i.innerText;if(u&&u.trim()===n)return i}return null},Je=function(t){for(var e,n=(t=String(t)).length,r=-1,o="",i=t.charCodeAt(0);++r<n;)0!=(e=t.charCodeAt(r))?o+=e>=1&&e<=31||127==e||0==r&&e>=48&&e<=57||1==r&&e>=48&&e<=57&&45==i?"\\"+e.toString(16)+" ":(0!=r||1!=n||45!=e)&&(e>=128||45==e||95==e||e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122)?t.charAt(r):"\\"+t.charAt(r):o+="�";return o},Ke=function(t,e){return t.dispatchEvent(function(t){var e=t.event,n=t.bubbles,r=void 0===n||n,o=t.cancelable,i=void 0===o||o;if("function"==typeof window.Event)return new window.Event(e,{bubbles:r,cancelable:i});var u=document.createEvent("Event");return u.initEvent(e,r,i),u}({event:e}))},$e=function(t){return null!==t&&t instanceof HTMLSelectElement},We=function(t){return null!==t&&t instanceof HTMLInputElement},Xe=function(t){return null!==t&&t instanceof HTMLTextAreaElement},Ve=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&(We(t)||Xe(t))&&Ze({e:t,value:e,skipTrigger:n})},Ye=function(t,e){return null!==e&&null!==t.querySelector('[value="'.concat(e,'"]'))},Qe=function(t,e){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value");void 0!==n&&(void 0!==n.set&&n.set.call(t,e))},Ze=function(t){var e,n,r,o;null!==t.value&&(n=(e=t).e,r=e.value,o=e.skipTrigger,null!==r&&$e(n)&&(Qe(n,r),o||Ke(n,"select"),Ke(n,"change")),function(t){var e=t.e,n=t.value,r=t.skipTrigger;null!==n&&(We(e)||Xe(e))&&(Qe(e,n),r||Ke(e,"input"),Ke(e,"change"))}(t))},tn=function(t){return/^GY/.test(t.postcode)?"GG":/^JE/.test(t.postcode)?"JE":null},en="United Kingdom",nn="Isle of Man",rn="England",on="Scotland",un="Wales",sn="Northern Ireland",an="Channel Islands",cn=function(t){var e=t.country;if(e===rn)return en;if(e===on)return en;if(e===un)return en;if(e===sn)return en;if(e===nn)return nn;if(e===an){var n=tn(t);if("GG"===n)return"Guernsey";if("JE"===n)return"Jersey"}return null},ln=function(t,e){if(t){if($e(t)){var n=function(t){var e=t.country;return e===rn||e===on||e===un||e===sn?"GB":e===nn?"IM":e===an?tn(t):null}(e);Ye(t,n)&&Ze({e:t,value:n});var r=cn(e);Ye(t,r)&&Ze({e:t,value:r})}if(We(t)){var o=cn(e);Ze({e:t,value:o})}}},fn={};"undefined"!=typeof window&&(window.idpcGlobal?fn=window.idpcGlobal:window.idpcGlobal=fn);var dn={};Object.defineProperty(dn,"__esModule",{value:!0});var pn=dn.capitalisePostTown=void 0,hn=/^(of|le|upon|on|the)$/,vn=/\w+&\w+/,yn=function(t){return(t=t.toLowerCase()).match(hn)?t:t.match(vn)?t.toUpperCase():t.charAt(0).toUpperCase()+t.slice(1)},mn=/-/,gn=/^(in|de|under|upon|y|on|over|the|by)$/,bn=function(t){return null===t.match(mn)?t:t.split("-").map((function(t){return t.match(gn)?t.toLowerCase():yn(t)})).join("-")},wn=/bo'ness/i,Sn=/bfpo/i,Cn=function(t){return t.match(wn)?"Bo'Ness":t.match(Sn)?"BFPO":t};pn=dn.capitalisePostTown=function(t){return t.split(" ").map(yn).map(bn).map(Cn).join(" ")};var En=function(t){return t.filter((function(t){return Be(t)?!!t.trim():!!t})).join(", ")},kn=function(t,e){return void 0===t[e]},An=function(t,e,n){var r=m(function(t,e){var n=e.line_1,r=e.line_2,o=e.line_3;return 3===t?[n,r,o]:2===t?[n,En([r,o]),""]:[En([n,r,o]),"",""]}(function(t){var e=t.line_2,n=t.line_3;return e?n?3:2:1}(t),e),3),o=r[0],i=r[1],u=r[2];Ve(Ne(t.line_1||null,n),o),Ve(Ne(t.line_2||null,n),i),Ve(Ne(t.line_3||null,n),u)},On=function(t,e){var n,r={};for(n in t)if(t.hasOwnProperty(n)){var o=t[n],i=Ne('[name="'.concat(o,'"]'),e);if(i)r[n]=i;else{var u=Ne('[aria-name="'.concat(o,'"]'),e);u&&(r[n]=u)}}return r},jn=function(t,e){var n,r={};if(void 0===t)return t;for(n in t)if(t.hasOwnProperty(n)){var o=t[n];if(o){var i=ze(e,"label",o),u=Ne(i,e);if(u){var s=u.getAttribute("for");if(s){var a=e.querySelector("#".concat(Je(s)));if(a){r[n]=a;continue}}var c=u.querySelector("input");c&&(r[n]=c)}}}return r},_n=function(t){var e,r,o,i=t.config,u=n({},t.address),s=i.scope,a=i.titleizePostTown,c=i.populateOrganisation,l=i.populateCounty,f=n(n(n({},(e=t).outputFields),On(e.names||{},e.config.scope)),jn(e.labels||{},e.config.scope));for(r in i.removeOrganisation&&xn(u),a&&(u.post_town=pn(u.post_town)),An(f,u,s),delete u.line_1,delete u.line_2,delete u.line_3,ln(Ne(f.country||null,s),u),delete u.country,!1===c&&delete u.organisation_name,!1===l&&delete u.county,f)if(!kn(u,r)&&f.hasOwnProperty(r)){var d=f[r];if(!d)continue;Ve(Ne(d,s),(o=void 0,"number"==typeof(o=u[r])?o.toString():void 0===o?"":o))}},xn=function(t){return 0===t.organisation_name.length||0===t.line_2.length&&0===t.line_3.length||t.line_1===t.organisation_name&&(t.line_1=t.line_2,t.line_2=t.line_3,t.line_3=""),t},Tn={13:"Enter",38:"ArrowUp",40:"ArrowDown",36:"Home",35:"End",27:"Escape",8:"Backspace"},Pn=["Enter","ArrowUp","ArrowDown","Home","End","Escape","Backspace"],Ln=function(t){return t.keyCode?Tn[t.keyCode]||null:(e=t.key,-1!==Pn.indexOf(e)?t.key:null);var e},qn=function(t,e,n){var o,i,u,s,a,c,l,f,d=0,p=!1,h=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=o,r=i;return o=i=void 0,d=e,s=t.apply(r,n)}function m(t){return d=t,a=setTimeout(b,e),p?y(t):s}function g(t){var n=t-c;return void 0===c||n>=e||n<0||h&&t-d>=u}function b(){var t=Date.now();if(g(t))return function(t){if(a=void 0,v&&o)return y(t);return o=i=void 0,s}(t);a=setTimeout(b,function(t){var n=t-d,r=e-(t-c);return h?Math.min(r,u-n):r}(t))}function w(){for(var t=Date.now(),n=g(t),r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];if(o=u,i=this,c=t,n){if(void 0===a)return m(c);if(h)return a=setTimeout(b,e),y(c)}return void 0===a&&(a=setTimeout(b,e)),s}return e=+e||0,f=r(l=n),!l||"object"!=f&&"function"!=f||(p=!!n.leading,u=(h="maxWait"in n)?Math.max(+n.maxWait||0,e):u,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==a&&clearTimeout(a),d=0,o=c=i=a=void 0},w.pending=function(){return void 0!==a},w},Rn=function(t){var e=t.bind,n=t.interval,r=void 0===n?1e3:n,o=null,i=function(){null!==o&&(window.clearInterval(o),o=null)};return{start:function(){return o=window.setInterval((function(){try{e()}catch(t){i()}}),r)},stop:i}},Bn=function(t){return window&&window.MutationObserver&&t.mutationObserver?function(t){var e=t.bind,n=t.interval,r=void 0===n?1e3:n,o=t.target,i=void 0===o?window.document:o,u=t.observerConfig,s=void 0===u?{subtree:!0,childList:!0,attributes:!0}:u,a=new MutationObserver(qn((function(){try{e()}catch(t){c()}}),r)),c=function(){return a.disconnect()};return{start:function(){return a.observe(i,s),null},stop:c}}(t):Rn(t)},Fn=function(t){return t.preventDefault&&t.preventDefault(),!1},Nn=function(){},In=function(){return!1},Un=function(t){if("Enter"===Ln(t))return t.preventDefault(),this.handleClick(),!1},Dn=function(t){return t.preventDefault(),this.options.onButtonTrigger.call(this),this.handleClick(),!1},Mn=function(){var t=parseInt(this.select.value,10);isNaN(t)||this.selectAddress(t)},Hn={apiKey:"",checkKey:!0,context:"",outputScope:null,onButtonTrigger:Nn,onSearchCompleted:Nn,onAddressesRetrieved:Nn,onAddressSelected:Nn,onSelectCreated:Nn,onSelectRemoved:Nn,onLookupTriggered:Nn,shouldLookupTrigger:function(){return!0},onSearchError:Nn,onLoaded:Nn,onFailedCheck:Nn,onRemove:Nn,onAddressPopulated:Nn,onUnhide:Nn,input:null,inputId:null,inputClass:"idpc-input",inputAriaLabel:"Search a postcode to retrieve your address",placeholder:"Search your postcode",button:null,buttonId:null,buttonLabel:"Find my Address",buttonClass:"idpc-button",selectContainer:null,selectId:null,selectClass:"idpc-select",selectContainerId:null,selectContainerClass:"idpc-select-container",selectAriaLabel:"Select your address",unhide:null,unhideClass:"idpc-unhide",message:null,messageId:null,messageClass:"idpc-error",msgSelect:"Please select your address",msgDisabled:"Finding addresses...",msgNotFound:"Your postcode could not be found. Please type in your address",msgAddressNotFound:"We could not find a match for your address. Please type in your address",msgError:"Sorry, we weren't able to get the address you were looking for. Please type in your address",msgUnhide:"Enter address manually",cooloff:500,removeOrganisation:!1,selectSinglePremise:!1,titleizePostTown:!0,postcodeSearchFormatter:function(t){var e=[t.line_1];return""!==t.line_2&&e.push(t.line_2),e.join(" ")},addressSearchFormatter:function(t){var e=[t.line_1];return""!==t.line_2&&e.push(t.line_2),e.push(t.post_town),e.push(t.postcode_outward),e.join(", ")},outputFields:{},strictlyPostcodes:!0,limit:10,inputStyle:{},buttonStyle:{},messageStyle:{},selectStyle:{},contextStyle:{},hide:[],autocomplete:"none",populateCounty:!0,populateOrganisation:!0},Gn=function(){function t(e){var r,i=this;o(this,t),this.prevContext=null,this.options=n(n(n({},{scope:window.document,document:window.document}),Hn),e),this.client=new Re(n(n({},this.options),{},{api_key:this.options.apiKey})),this.scope=Ue(this.options.scope),this.document=(r=this.scope)instanceof Document?r:r.ownerDocument?r.ownerDocument:Ie(),this.outputScope=this.findOrCreate(this.options.outputScope,(function(){return i.scope})),this.data=[],this.lastLookup="",this.context=this.findOrCreate(this.options.context),this.prevContext=De(this.context,this.options.contextStyle),this.keypress=Un.bind(this),this.click=Dn.bind(this),this.selectEvent=Mn.bind(this),this.unhideEvent=this.unhideFields.bind(this),this.input=this.createInput(),this.button=this.createButton(),this.message=this.createMessage(),this.select=this.createSelect(),this.selectContainer=this.createContainer(),this.unhide=this.createUnhide(),this.init()}return u(t,[{key:"findOrCreate",value:function(t,e){return Be(t)?this.scope.querySelector(t):e&&null===t?e():t}},{key:"createUnhide",value:function(){var t=this,e=this.findOrCreate(this.options.unhide,(function(){var e=t.document.createElement("p");return e.innerText=t.options.msgUnhide,e.setAttribute("role","button"),e.setAttribute("tabindex","0"),t.options.unhideClass&&(e.className=t.options.unhideClass),e}));return e.addEventListener("click",this.unhideEvent),e}},{key:"unmountUnhide",value:function(){this.unhide.removeEventListener("click",this.unhideEvent),!this.options.unhide&&this.options.hide.length&&Ge(this.unhide)}},{key:"createContainer",value:function(){var t=this;return this.findOrCreate(this.options.selectContainer,(function(){var e=t.options,n=t.document.createElement("div");return e.selectContainerId&&(n.id=e.selectContainerId),e.selectContainerClass&&(n.className=e.selectContainerClass),n.setAttribute("aria-live","polite"),Me(n),n}))}},{key:"unmountContainer",value:function(){Ge(this.selectContainer)}},{key:"createInput",value:function(){var t=this,e=this.findOrCreate(this.options.input,(function(){var e=t.document.createElement("input"),n=t.options;return e.type="text",n.inputId&&(e.id=n.inputId),n.inputClass&&(e.className=n.inputClass),n.placeholder&&(e.placeholder=n.placeholder),n.inputAriaLabel&&e.setAttribute("aria-label",n.inputAriaLabel),n.autocomplete&&e.setAttribute("autocomplete",n.autocomplete),De(e,t.options.inputStyle),e}));return e.addEventListener("keypress",this.keypress),e.addEventListener("submit",In),e}},{key:"unmountInput",value:function(){this.input.removeEventListener("keypress",this.keypress),this.input.removeEventListener("submit",In),null===this.options.input&&Ge(this.input)}},{key:"createButton",value:function(){var t=this,e=this.findOrCreate(this.options.button,(function(){var e=t.document.createElement("button"),n=t.options;return e.type="button",n.buttonLabel&&(e.innerText=n.buttonLabel),n.buttonId&&(e.id=n.buttonId),n.buttonClass&&(e.className=n.buttonClass),De(e,t.options.buttonStyle),e.onclick=Fn,e}));return e.addEventListener("submit",In),e.addEventListener("click",this.click),e}},{key:"unmountButton",value:function(){this.button.removeEventListener("submit",In),this.button.removeEventListener("click",this.click),null===this.options.button&&Ge(this.button)}},{key:"createMessage",value:function(){var t=this;return this.findOrCreate(this.options.message,(function(){var e=t.document.createElement("p"),n=t.options;return n.messageClass&&(e.className=n.messageClass),n.messageId&&(e.id=n.messageId),e.setAttribute("role","alert"),De(e,t.options.messageStyle),Me(e),e}))}},{key:"unmountMessage",value:function(){null===this.options.message&&Ge(this.message)}},{key:"createSelect",value:function(){var t=this.document.createElement("select"),e=this.options;return e.selectId&&(t.id=e.selectId),e.selectClass&&(t.className=e.selectClass),De(t,this.options.selectStyle),e.selectAriaLabel&&t.setAttribute("aria-label",e.selectAriaLabel),t.addEventListener("change",this.selectEvent),t}},{key:"mountSelect",value:function(t){t&&(this.data=t),function(t){var e;for(e=t.options.length-1;e>=0;e--)t.remove(e)}(this.select),this.select.appendChild(this.createOption("ideal",this.options.msgSelect));for(var e=0;e<this.data.length;e+=1)this.select.appendChild(this.createOption(e.toString(),this.formatAddress(this.data[e])));this.selectContainer.appendChild(this.select),He(this.selectContainer),this.options.onSelectCreated.call(this,this.select)}},{key:"unmountSelect",value:function(){Ge(this.select),Me(this.selectContainer),this.options.onSelectRemoved.call(this)}},{key:"selectAddress",value:function(t){var e=this.data[t];e&&(this.populateAddress(e),this.options.onAddressSelected.call(this,e))}},{key:"handleClick",value:function(){if(!this.options.shouldLookupTrigger.call(this))return!1;this.options.onLookupTriggered.call(this);var t=this.input.value;return this.lastLookup===t||(this.lastLookup=t,this.reset(),this.disableButton(),this.executeSearch(t)),!1}},{key:"disableButton",value:function(t){this.options.button||(this.button.setAttribute("disabled","true"),this.button.innerText=t||this.options.msgDisabled)}},{key:"enableButton",value:function(){this.options.button||(this.button.removeAttribute("disabled"),this.button.innerText=this.options.buttonLabel)}},{key:"enableLookup",value:function(){var t=this;if(!this.options.button){var e=this.options.cooloff;if(0===e)return this.enableButton();setTimeout((function(){return t.enableButton()}),e)}}},{key:"reset",value:function(){this.unmountSelect(),this.hideMessage()}},{key:"removeAll",value:function(){var t,e;this.unmountInput(),this.unmountButton(),this.unmountContainer(),this.unmountMessage(),this.unmountUnhide(),t=this.context,e=this.prevContext,t.setAttribute("style",e||""),this.options.onRemove.call(this)}},{key:"notFoundMessage",value:function(){return this.options.strictlyPostcodes?this.options.msgNotFound:this.options.msgAddressNotFound}},{key:"executeSearch",value:function(t){var e=this;this.enableLookup(),(this.options.strictlyPostcodes?this.searchPostcode(t):this.searchAddress(t)).then((function(n){return e.options.onSearchCompleted.call(e,null,n),0===n.length?e.setMessage(e.notFoundMessage()):(e.lastLookup=t,e.data=n,e.options.onAddressesRetrieved.call(e,n),e.options.selectSinglePremise&&1===n.length?e.selectAddress(0):void e.mountSelect(n))})).catch((function(t){e.setMessage(e.options.msgError),e.options.onSearchCompleted.call(e,null,[]),e.options.onSearchError.call(e,t)}))}},{key:"searchPostcode",value:function(t){return st({client:this.client,postcode:t})}},{key:"searchAddress",value:function(t){return function(t){var e={},n={query:t.query},r=t.client;N({client:r,header:e,options:t}),U({header:e,options:t}),D({query:n,options:t}),M({client:r,query:n,options:t}),function(t){var e=t.query,n=t.options,r=n.page,o=n.limit;void 0!==r&&(e.page=r.toString()),void 0!==o&&(e.limit=o.toString())}({query:n,options:t});var o={header:e,query:n};return void 0!==t.timeout&&(o.timeout=t.timeout),ut(r,o).then((function(t){return t.body.result.hits}))}({client:this.client,query:t,limit:this.options.limit})}},{key:"formatAddress",value:function(t){return(this.options.strictlyPostcodes?this.options.postcodeSearchFormatter:this.options.addressSearchFormatter)(t)}},{key:"createOption",value:function(t,e){var n=this.document.createElement("option");return n.text=e,n.value=t,n}},{key:"setMessage",value:function(t){if(this.message){if(void 0===t)return this.hideMessage();He(this.message),this.message.innerText=t}}},{key:"hideMessage",value:function(){this.message&&(this.message.innerText="",Me(this.message))}},{key:"init",value:function(){var t=this,e=function(){t.render(),t.hideFields(),t.options.onLoaded.call(t)};if(!this.options.checkKey)return e();ct({client:this.client}).then((function(t){return t.available?e():C.reject("Key not available")})).catch((function(e){t.options.onFailedCheck&&t.options.onFailedCheck(e)}))}},{key:"populateAddress",value:function(t){this.unhideFields();var e=this.options.outputFields,r=n(n({},this.options),{},{scope:this.outputScope});_n({outputFields:e,address:t,config:r}),this.options.onAddressPopulated.call(this,t)}},{key:"hiddenFields",value:function(){var t=this;return this.options.hide.map((function(e){return Be(e)?(n=t.scope,(r=e)?n.querySelector(r):null):e;var n,r})).filter((function(t){return null!==t}))}},{key:"hideFields",value:function(){this.hiddenFields().forEach(Me)}},{key:"unhideFields",value:function(){this.hiddenFields().forEach(He),this.options.onUnhide.call(this)}},{key:"render",value:function(){this.context.innerHTML="",this.options.input||this.context.appendChild(this.input),this.options.button||this.context.appendChild(this.button),this.options.selectContainer||this.context.appendChild(this.selectContainer),this.options.message||this.context.appendChild(this.message),!this.options.unhide&&this.options.hide.length&&this.context.appendChild(this.unhide)}}]),t}(),zn=function(){return!0},Jn=function(){},Kn=function(t){var e,n=Ue(t.scope||null).querySelectorAll(t.anchor||t.context||t.scope);return(e=n,Array.prototype.slice.call(e)).filter((function(t){return!("true"===t.getAttribute("idpc"))}))},$n=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.pageTest,i=void 0===o?zn:o,u=r.onError,s=void 0===u?Jn:u,a=r.onBindAttempt,c=void 0===a?Jn:a,l=r.onBind,f=void 0===l?Jn:l,d=r.anchor,p=r.onAnchorFound,h=void 0===p?Jn:p,v=r.getScope,y=void 0===v?Ue:v,m=function(){try{c(t),Kn(n({anchor:d},t)).forEach((function(n){if(i()){var r=y(n);h({anchor:n,scope:r,config:t}),e=new Gn(t),Fe(n),f(e)}}))}catch(t){s(t)}},g=Bn({config:t,bind:m}),b=g.start,w=g.stop;return b(),{start:b,stop:w,controller:e}},Wn=[],Xn={controllers:Wn,setup:function(t){var e=new Gn(t);return Wn.push(e),e},Controller:Gn,defaults:Hn,watch:$n};t.Controller=Gn,t.PostcodeLookup=Xn,t.watch=$n,Object.defineProperty(t,"__esModule",{value:!0})}));
